!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.r(e);var o=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"ctx",void 0),a(this,"xPos",void 0),a(this,"yPos",void 0),a(this,"radius",void 0),a(this,"xPosStart",void 0),a(this,"yPosStart",void 0),a(this,"ballMovementX",void 0),a(this,"ballMovementY",void 0),a(this,"peakBallMovementY",void 0),a(this,"radius",void 0),a(this,"shouldMove",void 0),a(this,"ballMovementHandler",function(){i.shouldMove=!0});var o=n.xPos,r=n.yPos,s=n.radius;this.ctx=e,this.xPosStart=o,this.yPosStart=r,this.ballMovementX=0,this.ballMovementY=-2.5,this.xPos=this.xPosStart,this.yPos=this.yPosStart,this.peakBallMovementY=this.yPosStart-50,this.radius=s,this.shouldMove=!1}var e,n,o;return e=t,(n=[{key:"render",value:function(t){this.drawBall(),t||(this.ballReachedPeakHeight()&&this.reverseBallDirection(),this.shouldMove&&this.moveBall(),this.ballHasLanded()&&this.handleBallLanding())}},{key:"drawBall",value:function(){var t=this.ctx;t.beginPath(),t.arc(this.xPos,this.yPos,this.radius,0,2*Math.PI),t.fillStyle="black",t.fill(),t.closePath()}},{key:"ballReachedPeakHeight",value:function(){return this.yPos<this.peakBallMovementY}},{key:"ballHasLanded",value:function(){return this.yPos>this.yPosStart}},{key:"reverseBallDirection",value:function(){this.ballMovementY=-this.ballMovementY}},{key:"moveBall",value:function(){this.xPos+=this.ballMovementX,this.yPos+=this.ballMovementY}},{key:"handleBallLanding",value:function(){this.shouldMove=!1,this.reverseBallDirection(),this.yPos+=this.ballMovementY}}])&&i(e.prototype,n),o&&i(e,o),t}();function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"ctx",void 0),r(this,"radius",void 0),r(this,"xPos",void 0),r(this,"yPos",void 0),r(this,"maxSections",void 0),r(this,"numberOfSections",void 0),r(this,"startRadian",void 0),r(this,"currentRadian",void 0),r(this,"numberOfRotations",void 0),r(this,"oneDegreeAsRadian",void 0),r(this,"idIncrementer",void 0),r(this,"colors",void 0),r(this,"startingHoleRotationValue",void 0),r(this,"render",function(t){var e=i.numberOfRotations,n=i.maxSections,a=e+1;i.numberOfSections=a<=n?a:i.maxSections,i.adjustForStartingPosition(-i.startingHoleRotationValue),i.drawPlatform(),i.adjustForStartingPosition(i.startingHoleRotationValue),t||(i.handleRadianCalculation(),i.handleRotation())}),r(this,"adjustForStartingPosition",function(t){i.ctx.translate(i.xPos,i.yPos),i.ctx.rotate(t),i.ctx.translate(-i.xPos,-i.yPos)}),r(this,"drawPlatform",function(){for(var t=i.ctx,e=i.numberOfSections,n=i.currentRadian,a=2*Math.PI/e,o=0;o<e;o++){var r=i.colors[o%2],s=o*a-n+.3141592653589793,l=o===e?2*Math.PI-n:(o+1)*a-n;i.drawArc(s,l,r),t.stroke(),t.closePath()}}),r(this,"drawArc",function(t,e,n){i.ctx.beginPath(),i.ctx.arc(i.xPos,i.yPos,i.radius,t,e),i.ctx.strokeStyle=n}),r(this,"handleRadianCalculation",function(t){var e=i.currentRadian,n=i.oneDegreeAsRadian;t&&(e=0,n=0);var a=e+n;i.currentRadian=a>6.283185?0:a}),r(this,"handleRotation",function(t){t?i.numberOfRotations=0:0===i.currentRadian&&(i.numberOfRotations+=1)}),r(this,"reset",function(){i.handleRadianCalculation(!0),i.handleRotation(!0)}),this.ctx=e,this.radius=n.radius,this.xPos=n.xPos,this.yPos=n.yPos,this.maxSections=n.maxSections,this.numberOfSections=2,this.startRadian=0,this.currentRadian=this.startRadian,this.numberOfRotations=0,this.oneDegreeAsRadian=.017453292519943295,this.startingHoleRotationValue=120*Math.PI/180,this.idIncrementer=0,this.colors=["#762973","#495900"]};function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"canvas",void 0),c(this,"currentScoreElement",void 0),c(this,"highScoreElement",void 0),c(this,"playButtonElement",void 0),c(this,"ctx",void 0),c(this,"canvasCenterX",void 0),c(this,"canvasCenterY",void 0),c(this,"ball",void 0),c(this,"rotatingPlatform",void 0),c(this,"userFailed",void 0),c(this,"currentScore",void 0),c(this,"highScore",void 0),c(this,"render",function(){n.rotatingPlatform.reset(),n.setupKeypressHandlers(),n.setupDOM(),n.drawGame()}),c(this,"drawGame",function(){n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height),n.rotatingPlatform.render(n.userFailed),n.ball.render(n.userFailed),n.updateUserStatus(),n.handleScore(),window.requestAnimationFrame(n.drawGame)}),c(this,"handleScore",function(){if(n.ballIsColliding()){var t=n.rotatingPlatform.numberOfRotations;n.userFailed&&(t=":("),n.currentScore!==t&&(n.currentScore=t,n.currentScoreElement.innerText="".concat(t),n.handleHighScore())}}),c(this,"handleHighScore",function(){"number"==typeof n.currentScore&&n.currentScore>n.highScore&&(n.highScore=n.currentScore,n.highScoreElement.innerText="".concat(n.highScore))}),c(this,"ballIsColliding",function(){var t=n.ball.yPos+1,e=Math.pow(t-n.rotatingPlatform.yPos,2)+Math.pow(n.ball.xPos-n.rotatingPlatform.xPos,2);return Math.sqrt(e)<n.ball.radius+n.rotatingPlatform.radius}),c(this,"onUserFailed",function(){n.playButtonElement.style.display="block"}),c(this,"onPlayAgain",function(){n.playButtonElement.style.display="none",n.userFailed=!1,n.rotatingPlatform.reset()}),c(this,"setupDOM",function(){n.canvas.style.display="block",n.playButtonElement.style.display="none",n.playButtonElement.innerText="Play Again"}),c(this,"setupKeypressHandlers",function(){n.playButtonElement.onclick=n.onPlayAgain,document.addEventListener("keydown",function(t){" "!==t.key||n.userFailed||n.ball.ballMovementHandler()}),document.addEventListener("touchstart",function(){n.ball.ballMovementHandler()})}),this.userFailed=!1,this.currentScoreElement=e.currentScoreElement,this.highScoreElement=e.highScoreElement,this.playButtonElement=e.playButtonElement,this.canvas=e.canvas,this.ctx=this.canvas.getContext("2d"),this.canvasCenterX=this.canvas.width/2,this.canvasCenterY=this.canvas.height/2,this.currentScore="0",this.highScore=0,this.rotatingPlatform=new s(this.ctx,{xPos:this.canvasCenterX,yPos:this.canvasCenterY+45,radius:125,maxSections:10});this.ball=new o(this.ctx,{radius:10,xPos:this.canvasCenterX,yPos:this.rotatingPlatform.yPos-this.rotatingPlatform.radius-10}),this.playButtonElement.onclick=this.render}var e,n,i;return e=t,(n=[{key:"updateUserStatus",value:function(){this.ballIsColliding()&&!this.userFailed&&(this.ctx.getImageData(this.rotatingPlatform.xPos,this.rotatingPlatform.yPos-this.rotatingPlatform.radius,1,1).data.every(function(t){return!t})&&(this.userFailed=!0,this.onUserFailed()))}}])&&l(e.prototype,n),i&&l(e,i),t}(),u=document.getElementById("game"),d=document.getElementById("current-score"),v=document.getElementById("high-score"),f=document.getElementById("play-button");u instanceof HTMLCanvasElement&&d instanceof HTMLElement&&v instanceof HTMLElement&&f instanceof HTMLElement&&new h({canvas:u,currentScoreElement:d,highScoreElement:v,playButtonElement:f})}]);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Game for Even</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }
        body {
            width: 500px;
            margin: 0 auto;
        }
        canvas {
            background: #eee;
            display: block;
            margin: 0 auto;
        }

    </style>
</head>
<body>
    <h1>Score <span id="score"></span></h1>
    <canvas id="game" width="480" height="320">No worky</canvas>


    <script>
		const canvas = document.getElementById("game");
        const ctx = canvas.getContext("2d");
        const widthCenter = canvas.width / 2
		const heightCenter = canvas.height / 2

        const oneDegreeAsRadian = 0.01745329

        let currentRadian = 0
        let numberOfRotations = 0

		function drawCircle(numberOfSections) {
			const sizeOfLine = (Math.PI * 2) / numberOfSections
            const sizeOfHole = 0.3141592653589793
            ctx.save()
			ctx.translate(widthCenter, heightCenter);
			for(let i = 0; i < numberOfSections; i++) {
        		const start = (i*sizeOfLine - currentRadian) + sizeOfHole
        		const stop = (i === numberOfSections)
					? Math.PI * 2 - currentRadian
                    : (i + 1) * sizeOfLine - currentRadian
                const color = (i+1 === numberOfSections) ? 'red' : 'blue'
			    drawArc(start, stop, color)
				ctx.stroke()
				ctx.closePath();
            }
            ctx.restore()
        }

        function drawArc(start, stop, color = 'blue') {
			ctx.beginPath();
			ctx.arc(0, 0, 100, start, stop)
			ctx.strokeStyle = color
        }

        function addRadian(baseRadian, numberToAdd) {
            const combinedRadian = baseRadian + numberToAdd
            return (baseRadian > 6.283185)
                ? 0
                : combinedRadian
		}

        function writeScore() {
			document.getElementById('score').innerText = numberOfRotations
        }

        function drawBall() {
        	ctx.beginPath()
        	ctx.arc(widthCenter, 49, 10, 0, Math.PI*2)
            ctx.fillColor = 'black'
            ctx.fill()
			ctx.closePath();
        }

        function rotate() {
			const sectionsForCircle = numberOfRotations + 2
			ctx.beginPath()
			ctx.clearRect(0, 0, canvas.width, canvas.height)
            ctx.closePath()
        	drawCircle(sectionsForCircle < 10 ? sectionsForCircle : 10)
            currentRadian = addRadian(currentRadian, oneDegreeAsRadian)
            numberOfRotations = currentRadian === 0 ? numberOfRotations + 1 : numberOfRotations
            drawBall()
            writeScore()
        	window.requestAnimationFrame(rotate)
        }
        rotate()
    </script>
</body>
</html>
